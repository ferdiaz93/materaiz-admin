import{u,f as w,g as m,t as f,j as a,c as h,a as e,a9 as g,i as b,k,F as x,W as S,A as T,S as d,aa as y,T as p,e as v}from"./index-b7d380d3.js";import{o as F}from"./yup-f2b37846.js";import{u as P,T as A,C as c,a as q,b as j}from"./styles-d2076309.js";import{T as _}from"./TemplatePasswordField-a2b88da9.js";import{T as L}from"./TemplateTextField-37be45ad.js";import{A as R}from"./Alert-cafeeeee.js";import"./InputAdornment-df11fb81.js";import"./Close-4b18e9b3.js";const C={password:"",password_confirmation:"",email:""};function W({onSubmit:n}){var t;const{t:r}=u(),i=w().shape({password:m().required(r("token_reset_password.form_password_error_required")),password_confirmation:m().oneOf([f("password"),void 0],r("token_reset_password.form_password_confirmation_error_passwords_must_match")).required(r("token_reset_password.form_password_confirmation_error_required")),email:m().email().required(r("token_reset_password.form_email_error_required"))}),o=P({resolver:F(i),defaultValues:C});return a(h,{sx:{m:0,minWidth:"600px"},children:[!!o.formState.errors.afterSubmit&&e(R,{severity:"error",sx:{marginBottom:4},children:(t=o.formState.errors.afterSubmit)==null?void 0:t.message}),a(A,{hf:o,onSubmit:n,children:[e(c,{name:"email",render:s=>e(L,{...s,placeholder:"juan@gmail.com",label:r("token_reset_password.email_label"),floatingLabel:!0})}),e(c,{name:"password",render:s=>e(_,{...s,placeholder:"•••••••",label:r("token_reset_password.password_label"),floatingLabel:!0})}),e(c,{name:"password_confirmation",render:s=>e(_,{...s,placeholder:"•••••••",label:r("token_reset_password.confirm_password_label"),floatingLabel:!0})}),e(q,{children:e(j,{fullWidth:!0,size:"large",sx:{bgcolor:"#263c7a",color:s=>s.palette.mode==="light"?"common.white":"grey.800","&:hover":{bgcolor:"text.primary",color:s=>s.palette.mode==="light"?"common.white":"grey.800"}},children:r("token_reset_password.reset_password_button")})})]})]})}function B(n){const r=n.split("/");return r[r.length-1]}function U(){const n=B(window.location.href),{mutateAsync:r}=g(),i=b(),{enqueueSnackbar:o}=k(),{t}=u(),s=async l=>{try{await r({password:l.password,token:n,password_confirmation:l.password_confirmation,email:l.email}),o(t("token_reset_password.email_successfully_sent"),{variant:"success"}),i(v["successfully-reset-password"].root)}catch{o(t("token_reset_password.email_error_message"),{variant:"error"})}};return a(x,{children:[e(S,{children:a("title",{children:[t("token_reset_password.helmet_title")," | ",T," "]})}),a(d,{justifyContent:"center",alignItems:"center",gap:"40px",children:[a(d,{justifyContent:"center",alignItems:"center",gap:"24px",children:[e("img",{src:y,alt:"logo",height:"100px",width:"100px"}),a(d,{gap:"12px",children:[e(p,{variant:"h3",fontWeight:800,children:t("token_reset_password.title")}),e(p,{variant:"caption",fontSize:"17px",children:t("token_reset_password.subtitle")})]})]}),e(W,{onSubmit:s})]})]})}export{U as default};

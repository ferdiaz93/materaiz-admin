import{a5 as g,G as f,a as n,an as b,j as o,F as y,W as x,A as v,J as _,e as C,c as r,h as W,T as e,D as i,ao as S}from"./index-b7d380d3.js";import{C as D,a as m}from"./CustomBreadcrumbs-a2ae44ce.js";import{b as L,c as M}from"./orderRepository-5b48871f.js";import{f as d}from"./formatText-85b98f5a.js";const k=()=>{var h;const l=g(),{themeStretch:p}=f(),s=L(Number(l.id)),c=M();if(s.isLoading)return n(b,{});const t=s.data,u=async()=>{try{await c.mutateAsync(t.id),alert("Orden marcada como enviada")}catch(a){console.error(a),alert("Error al actualizar")}};return o(y,{children:[n(x,{children:o("title",{children:["Detalle de compra | ",v]})}),o(_,{maxWidth:p?!1:"lg",children:[n(D,{heading:"Detalle de la compra",links:[{name:"Compras",href:C.dashboard.orders.list},{name:`Compra #${l.id}`}]}),n(r,{sx:{display:"flex",justifyContent:"flex-end",mb:2},children:n(W,{variant:"contained",loading:c.isLoading,onClick:u,children:"Marcar como enviado"})}),o(m,{sx:{p:3,mb:3},children:[n(e,{variant:"h6",gutterBottom:!0,children:"Información del cliente"}),n(i,{sx:{mb:2}}),o(r,{sx:{display:"grid",gap:1},children:[o(e,{children:[n(e,{component:"span",fontWeight:"bold",children:"Cliente:"})," ",d(t.first_name)," ",d(t.last_name)]}),o(e,{children:[n(e,{component:"span",fontWeight:"bold",children:"Email:"})," ",t.email]}),o(e,{children:[n(e,{component:"span",fontWeight:"bold",children:"Teléfono:"})," ",t.phone]}),o(e,{children:[n(e,{component:"span",fontWeight:"bold",children:"Fecha:"})," ",S(t.created_at).format("DD/MM/YYYY HH:mm")]}),o(e,{children:[n(e,{component:"span",fontWeight:"bold",children:"Tipo de entrega:"})," ",t.is_home_delivery?"Envío a domicilio":"Retiro por local"]}),t.is_home_delivery&&t.address&&o(e,{children:[n(e,{component:"span",fontWeight:"bold",children:"Dirección:"})," ",d(t.address)]}),o(e,{children:[n(e,{component:"span",fontWeight:"bold",children:"Total:"})," ","$",Number(t.total_amount).toLocaleString()]})]})]}),o(m,{sx:{p:3},children:[n(e,{variant:"h6",gutterBottom:!0,children:"Productos comprados"}),n(i,{sx:{mb:2}}),(h=t.items)==null?void 0:h.map(a=>o(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #eee",py:1.5},children:[o(r,{children:[n(e,{component:"span",fontWeight:"bold",children:a.product_name}),o(e,{variant:"body2",color:"text.secondary",children:["Cantidad: ",a.quantity]})]}),o(e,{children:["$",(Number(a.unit_price)*a.quantity).toLocaleString()]})]},a.id)),t.is_home_delivery&&o(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #eee",py:1.5},children:[o(r,{children:[n(e,{component:"span",fontWeight:"bold",children:"Costo de envío"}),n(e,{variant:"body2",color:"text.secondary",children:"Envío a domicilio"})]}),o(e,{children:["$",Number(t.shipping_cost).toLocaleString()]})]}),n(i,{sx:{my:2}}),o(e,{align:"right",variant:"subtitle1",children:[n(e,{component:"span",fontWeight:"bold",children:"Total:"})," ","$",Number(t.total_amount).toLocaleString()]})]})]})]})};export{k as OrdersDetailPage,k as default};
